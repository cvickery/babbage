<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
                          "http://www.w3.org/TR/html4/strict.dtd">
<html><head><title>pmw</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">

  <style type="text/css" media="screen">
      body {
        background-color: #ffc;
        font-family:      sans-serif;
        color:            #661;
        margin:           2em;
        }
      h1 {
        text-align:       center;
        }
      pre {
        background-color: #fff;
        color:            #111;
        margin:           1em;
        border:           1px solid red;
        }
      #footer {
        text-align:       center;
        font-size:        0.7em;
        }
  </style>
</head>
<body>
	<h1>pmw</h1>
	<hr>
	<pre>
#! /bin/bash

# Give world read permission to a tree.

# 2006-06-08
# Preserve executability and owner writeability.
# Only accurate way to determine writeability is to use the file
# command, which slows this script down a lot.  Too bad.

# 2006-05-13
# For each argument:
#   If it is a directory, process recursively.
#   Else
#     If it does not exist, create the file
#     Permit the file

# If argument is not a directory: create file if it doesn't exist at
# all, and permit the file.  ccv 2006-03-07

while [[ $# &gt; 0 ]]
do
  if [[ ! -d "$1" ]]
  then

    if [[ ! -e "$1" ]]
    then
      echo "Creating:  $1"     &gt; /dev/tty
      touch "$1"
#   else
#     echo "File: $1"       &gt; /dev/tty
    fi
    w=1
    [[ -w "$1" ]] &amp;&amp; w=0
    if [[ $(file "$1"|grep executable) ]]
    then chmod 555 "$1"
    else chmod 444 "$1"
    fi
    [[ $w ]] &amp;&amp; chmod +w "$1"

  else

    echo "Directory: $1"
    chmod 755 "$1"

    ls -d "$1"/* &gt; /dev/null 2&gt;&amp;1
    if [[ $? == 0 ]]
    then
      for f in "$1"/*
      do
        if [[ ! -d "$f" ]]
          then
            w=1
            [[ -w "$f" ]] &amp;&amp; w=0
            if [[ $(file "$f"|grep executable) ]]
            then chmod 555 "$f"
            else chmod 444 "$f"
            fi
            [[ $w ]] &amp;&amp; chmod +w "$f"
          else  $HOME/bin/pmw "$f" #"${f// /\\ }"
        fi
      done
    fi
  fi
  shift
done

</pre>
<div id="footer">

  <p>This web page was generated by <cite><a
    href="./mkhtml.html">mkhtml</a></cite> on
    2009-03-09<br />
    Copyright &copy; 2002&ndash;2009 by Christopher Vickery<br />
    Licensed under a <a rel="license"
    href="http://creativecommons.org/licenses/by-sa/2.5/">Creative
    Commons Attribution-ShareAlike 2.5 License</a><br />
    <a href="http://validator.w3.org/check?uri=referer">HTML</a> -
    <a href="http://jigsaw.w3.org/css-validator/check/referer">CSS</a>
  </p>
</div>
</body></html>
