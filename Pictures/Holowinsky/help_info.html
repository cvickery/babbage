<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
"http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head><title>Vickery's Photo Gallery</title>
<style type="text/css">
  body { background: #ffffcc; }
  h1   { text-align: center;  }
  p { margin-left: 1em; margin-right: 2em; }
  div.whitebox {background:white;border:solid thin blue; margin:1em;
  padding:1em;}
  p.author
  {
    text-align: center;
    font-size: larger;
  }
  dl { margin-left: 2em; }

</style>
<style type="text/css" media="screen">
  body { font-family: sans-serif }
</style>
</head>
<body>

<h1>Photo Gallery</h1>
<p class="author">Christopher Vickery<br>
Queens College of CUNY</p>

<h2>Hints and Help</h2>
<div class="whitebox">

  <p>Adjust your browser window's width so you don't have to scroll left
  and right.  Use the "Smaller" and "Larger" buttons to change the size
  of the pictures to fit your screen.  If pictures take too long to come
  up, click the "Lower Resolution" button;  the photos will still be
  clear, but should come up twice as fast.</p>
  
  <p>Use the First/Last/Previous/Next buttons to move from picture to
  picture, or click on a thumbnail at the bottom of the page to go
  directly to a particular image.</p>
  
</div>

<h2>About This Page</h2>
<div class="whitebox">

  <p>The "XHTML" and "CSS" links will validate the page to verify that
  it adheres to the standards for web page design published by the World
  Wide Web Consortium, w3c.org.  By meeting these standards, the page
  should look very similar regardless of what web browser or type of
  computer you use to view it.</p>
  
  <p>However, despite the fact that the page passes these validation
  tests, it does appear differently when viewed using Microsoft's
  Internet Explorer compared to other browsers such as Mozilla Firefox. 
  (With Firefox, the heading image is centered over the image being
  viewed, and the image being viewed has a frame drawn around it.  But
  with Internet Explorer, the frame is missing and the main picture is
  offset to the left by the width of the missing frame.)</p>
  
  <p>Furthermore, the MIME type for the page is wrong.  As an XHTML
  document, the server should tell the browser that the MIME type is
  "application/xhtml+xml" but Internet Explorer completely fails to show
  the page at all if that MIME type is used.  It's possible to test if
  the user's browser is Internet Explorer and to fudge the MIME type in
  that case.  But the current version of Firefox doesn't render the page
  if the MIME type is application/xhtml_xml either; it has problems with
  the feature called "inner HTML" that I used for updating the image and
  image title.  A future version will do it all correctly, ... I'm
  sure.</p>

</div>

<h2>Source Code Available</h2>
<div class="whitebox">

  <p>The page is written using a combination of HTML, PHP, JavaScript,
  and CSS.  The stylesheet information is in <a
  href="photos.css">photos.css</a>, and most of the JavaScript is in <a
  href="photos.js">photos.js</a>; you can download them easily by
  clicking on the links or by using a utility like <i>wget</i>.  But the
  main document is named <a href="./index.php.html">index.php</a>, and
  you can see a copy of it only by clicking on the link given here.  If
  you try to look at it by using your browser's "view source" feature,
  or if you try to download it using wget, the PHP code will be executed
  by the server, and you will see only the HTML/JavaScript code
  generated by the PHP program rather than the PHP program itself.</p>

</div>

<h2>Using the Source Code</h2>
<div class="whitebox">

  <p>This was an exercise to generate a photo gallery for the web such
  that once the framework is in place one would need only to supply the
  images to be displayed and everything else would happen
  automagically.  Side constraints were that the code had to pass the
  XHTML 1.1 and CSS validation tests of w3.org and that the code has to
  work with both Internet Explorer and Mozilla Firefox. (It should work
  with other browsers, but I used only the latest released versions of
  those two for testing.)</p>

  <p>The project uses a mix of hand-coded XHTML, PHP code to generate
  the XHTML for the parts that depend on what images are found in the
  server-side directory, and javascript for the client-side
  interactions.  Rather than reload the entire page for each picture, it
  uses DHTML ("innerHTML") to change the image being displayed.</p>

<h3>Setting Up</h3>

  <p>To set up a photo gallery, create three sets of image files:
  thumbnails, regular images, and smaller images for faster downloads. 
  Put them in subdirectories named thumbnails, images-full, and
  images-medium respectively.  I make the maximum dimension (height or
  width) 800 pixels, but the code doesn't demand it.  I save the
  high-resolution images with a jpeg quality of 100 and the
  lower-resolution images with a quality of 60 using Photoshop's
  "optimize for web" feature.  The smaller images are about 1/3 the size
  of the larger ones.  I think you could do the same thing with
  ImageMagick's convert routine if you specify a resolution of 72 pixels
  per inch.</p>

  <p>The current version of the code uses the PNG format for the
  thumbnail files, which should have widths of about 60 pixels.</p>

  <p>Optionally, prepare a text file named "image_list" with the names
  of the image files in the sequence you want them to appear, one file
  per line.  If image_list is missing, the images will be prepared in
  the order in which they are found in the thumbnails directory.</p>

  <p>Files that must be in this directory:</p>

  <dl>

    <dt>header.png</dt>

                  <dd>The header that will appear at the top of the
                  page.  The alternate text is the name of the directory
                  holding everything. Internet Explorer displays the alt
                  text in a small font next to a broken image icon;
                  Firefox shows it as a level 1 header that could be
                  customized in the style sheet (see below).</dd>

    <dt>image_list</dt>

                  <dd>See above.</dd>

    <dt>index.php</dt>

                  <dd>PHP script to generate the valid XHTML 1.1 web
                  page.  The web server must be configured to support
                  PHP scripting for this whole thing to work.  Also, the
                  web server must recognize "index.php" as a default
                  file to serve when a URL ends at the directory level. 
                  In apache, this is done with a DirectoryIndex entry in
                  the server's configuration file.  Otherwise, the user
                  has to type /index.php at the end of the URL.</dd>

    <dt>photos.css</dt>

                  <dd>The style sheet that determines what the generated
                  page looks like.  If missing or unreadable, the page
                  will have a white background and everything will be
                  squashed to the left.</dd>

    <dt>photos.js</dt>

                  <dd>Javascript functions to handle user interactions
                  once the page is loaded.</dd>

    <dt>favicon.ico</dt>

                  <dd>This is a 16x16 pixel image that gets displayed
                  next to the URL in the browser's location bar.  For
                  browsers that support tabbed browsing, it also shows
                  up on the tab for the page being viewed, and will be
                  used as the bookmark icon if the user bookmarks the
                  page.  If missing, the user probably won't know the
                  difference, but the server will either make an entry
                  in its error log and/or use favicon.ico from the
                  site's root directory.  I used Photoshop to create
                  them from the first image in the set; there are many
                  programs available that can do the same thing or let
                  you draw an icon by hand.</dd>

  </dl>

<h3>TODO</h3>

    <p>I'd like to avoid the need to click for each image, but
    haven't figured out how to get javascript timing
    functions to work yet.  That is, I want to do a standard
    "image preload" operation so the images will pop onto
    the screen after being loaded by the browser, rather
    than incrementally.  Then I would provide an option for
    loading images on a time interval, sort of like the
    standard "slide-show" feature.</p>

    <p>The buttons should have nice images instead of plain
    text on them.</p>

    <p>There should be options for a title and descriptive text
    to be extracted from the jpegs and displayed under the
    images.</p>

<h3>Issues</h3>

    <p>Inner HTML doesn't work for application/xhtml+xml in Firefox 1.0.
    I'm working on the DOM equivalent, but may switch over to inner
    frames instead.</p>

    <p>Internet Explorer shows a gray background instead of the html or
    body style sheet background color in the transparent parts of png
    images, spoiling the whole purpose of making the header a png
    instead of a jpg.</p>

    <p>Internet Explorer doesn't recognize &lt;script .... /&gt;; you
    have to have a separate &lt;/script&gt; tag.  Tracking that
    down was the "last bug."</p>

    <p>Internet explorer doesn't understand css div
    positioning, so that whole approach had to be chucked.</p>

    <p>Internet Explorer uses the browser background color (gray)
    instead of the body or html background stylesheet color for
    transparent parts of png files.  So you might as well make the
    backgrounds a solid color.</p>
    
    <p>Internet Explorer doesn't wrap the text on a button, and issue
    for the resolution button.</p>

</div>

<hr />

<p> <a href="http://validator.w3.org/check?uri=referer">
      <img  style="border:none"
            src="http://www.w3.org/Icons/valid-xhtml11"
            alt="Valid XHTML 1.1" /></a>
    <a href="http://jigsaw.w3.org/css-validator/check/referer">
      <img  style="border:none"
            src="http://jigsaw.w3.org/css-validator/images/vcss"
            alt="Valid CSS" /></a>
</p>
</body>
</html>
